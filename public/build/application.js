!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return webpackJsonp([0],{119:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSocket=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(60);t.ObservableSocket=function(){function e(t){var n=this;o(this,e),this._socket=t,this._state={},this._actionCallbacks={},this._requests={},this._nextRequestId=0,this.status$=i.Observable.merge(this.on$("connect").map(function(){return{isConnected:!0}}),this.on$("disconnect").map(function(){return{isConnected:!1}}),this.on$("reconnecting").map(function(e){return{isConnected:!1,isReconnecting:!0,attempt:e}}),this.on$("reconnect_failed").map(function(){return{isConnected:!1,isReconnecting:!1}})).publishReplay(1).refCount(),this.status$.subscribe(function(e){return n._state=e})}return s(e,[{key:"isConnected",get:function(){return this._state.isConnected}},{key:"isReconnecting",get:function(){return this._state.isReconnecting}},{key:"isTotallyDead",get:function(){return!this._state.isConnected&&!this._state.isReconnecting}}]),s(e,[{key:"on$",value:function(e){return i.Observable.fromEvent(this._socket,e)}},{key:"on",value:function(e,t){this._socket.on(e,t)}},{key:"off",value:function(e,t){this._socket.off(e,t)}},{key:"emit",value:function(e,t){this._socket.emit(e,t)}},{key:"emitAction$",value:function(e,t){var n=this._nextRequestId++;this._registerCallbacks(e);var o=this._requests[n]=new i.ReplaySubject(1);return this._socket.emit(e,t,n),o}},{key:"_registerCallbacks",value:function(e){var t=this;this._actionCallbacks.hasOwnProperty(e)||(this._socket.on(e,function(e,n){var o=t._popRequest(n);o&&(o.next(e),o.complete())}),this._socket.on(e+":fail",function(e,n){var o=t._popRequest(n);o&&o.error(e)}),this._actionCallbacks[e]=!0)}},{key:"_popRequest",value:function(e){if(!this._requests.hasOwnProperty(e))return void console.error("Event with id "+e+" was returned twice.");var t=this._requests[e];return delete this._requests[e],t}},{key:"onAction",value:function(e){this._socket.on(e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)})}}]),e}()},92:function(e,t,n){e.exports=n(93)},93:function(e,t,n){"use strict";n(94);var o=n(95),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);s.server.emitAction$("login",{username:"foo",password:bar}).subscribe(function(e){e.error?console.error(e.error):console.log("we are logged in")}),console.log("services.socket :",s.socket),s.socket.connect()},94:function(e,t){},95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.server=t.socket=void 0;var o=n(46),s=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(119),r=t.socket=(0,s.default)({autoConnect:!1});t.server=new i.ObservableSocket(r)}},[92])});